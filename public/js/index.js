var collData = {
    "entity_types": [
        {
            "type": "UNKNOWN",
            "labels": [ "", "UNKNOWN" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "ADJ",
            "labels": [ "", "ADJ" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "ADP",
            "labels": [ "", "ADP" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "ADV",
            "labels": [ "", "ADV" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "CONJ",
            "labels": [ "", "CONJ" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "DET",
            "labels": [ "", "DET" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "NOUN",
            "labels": [ "", "NOUN" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "NUM",
            "labels": [ "", "NUM" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "PRON",
            "labels": [ "", "PRON" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "PRT",
            "labels": [ "", "PRT" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "PUNCT",           
            "labels": [ "", "PUNCT" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "VERB",
            "labels": [ "", "VERB" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "X",
            "labels": [ "", "X" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        },
        {
            "type": "AFFIX",
            "labels": [ "", "AFFIX" ],
            "bgColor": "#7fa2ff",
            "borderColor": "darken"
        }
    ],            
    "relation_types": [
        {
            "type": "UNKNOWN",
            "labels": [ "", "UNKNOWN" ],
            "color": "purple"
        },
        {
            "type": "ABBREV",
            "labels": [ "", "ABBREV" ],
            "color": "purple"
        },
        {
            "type": "ACOMP",
            "labels": [ "", "ACOMP" ],
            "color": "purple"
        },
        {
            "type": "ADVCL",
            "labels": [ "", "ADVCL" ],
            "color": "purple"
        },
        {
            "type": "ADVMOD",
            "labels": [ "", "ADVMOD" ],
            "color": "purple"
        },
        {
            "type": "AMOD",
            "labels": [ "", "AMOD" ],
            "color": "purple"
        },
        {
            "type": "APPOS",
            "labels": [ "", "APPOS" ],
            "color": "purple"
        },
        {
            "type": "ATTR",
            "labels": [ "", "ATTR" ],
            "color": "purple"
        },
        {
            "type": "AUX",
            "labels": [ "", "AUX" ],
            "color": "purple"
        },
        {
            "type": "AUXPASS",
            "labels": [ "", "AUXPASS" ],
            "color": "purple"
        },
        {
            "type": "CC",
            "labels": [ "", "CC" ],
            "color": "purple"
        },
        {
            "type": "CCOMP",
            "labels": [ "", "CCOMP" ],
            "color": "purple"
        },
        {
            "type": "CONJ",
            "labels": [ "", "CONJ" ],
            "color": "purple"
        },
        {
            "type": "CSUBJ",
            "labels": [ "", "CSUBJ" ],
            "color": "purple"
        },
        {
            "type": "CSUBJPASS",
            "labels": [ "", "CSUBJPASS" ],
            "color": "purple"
        },
        {
            "type": "DEP",
            "labels": [ "", "DEP" ],
            "color": "purple"
        },
        {
            "type": "DET",           
            "labels": [ "", "DET" ],
            "color": "purple"
        },
        {
            "type": "DISCOURSE",
            "labels": [ "", "DISCOURSE" ],
            "color": "purple"
        },
        {
            "type": "DOBJ",
            "labels": [ "", "DOBJ" ],
            "color": "purple"
        },
        {
            "type": "EXPL",            
            "labels": [ "", "EXPL" ],
            "color": "purple"
        },
        {
            "type": "GOESWITH",
            "labels": [ "", "GOESWITH" ],
            "color": "purple"
        },
        {
            "type": "IOBJ",
            "labels": [ "", "IOBJ" ],
            "color": "purple"
        },
        {
            "type": "MARK",
            "labels": [ "", "MARK" ],
            "color": "purple"
        },
        {
            "type": "MWE",
            "labels": [ "", "MWE" ],
            "color": "purple"
        },
        {
            "type": "MWV",
            "labels": [ "", "MWV" ],
            "color": "purple"
        },
        {
            "type": "NEG",           
            "labels": [ "", "NEG" ],
            "color": "purple"
        },
        {
            "type": "NN",
            "labels": [ "", "NN" ],
            "color": "purple"
        },
        {
            "type": "NPADVMOD",
            "labels": [ "", "NPADVMOD" ],
            "color": "purple"
        },
        {
            "type": "NSUBJ",
            "labels": [ "", "NSUBJ" ],
            "color": "purple"
        },
        {
            "type": "NSUBJPASS",
            "labels": [ "", "NSUBJPASS" ],
            "color": "purple"
        },
        {
            "type": "NUM",
            "labels": [ "", "NUM" ],
            "color": "purple"
        },
        {
            "type": "NUMBER",
            "labels": [ "", "NUMBER" ],
            "color": "purple"
        },
        {
            "type": "P",
            "labels": [ "", "P" ],
            "color": "purple"
        },
        {
            "type": "PARATAXIS",
            "labels": [ "", "PARATAXIS" ],
            "color": "purple"
        },
        {
            "type": "PARTMOD",
            "labels": [ "", "PARTMOD" ],
            "color": "purple"
        },
        {
            "type": "PCOMP",
            "labels": [ "", "PCOMP" ],
            "color": "purple"
        },
        {
            "type": "POBJ",
            "labels": [ "", "POBJ" ],
            "color": "purple"
        },
        {
            "type": "POSS",
            "labels": [ "", "POSS" ],
            "color": "purple"
        },
        {
            "type": "POSTNEG",
            "labels": [ "", "POSTNEG" ],
            "color": "purple"
        },
        {
            "type": "PRECOMP",
            "labels": [ "", "PRECOMP" ],
            "color": "purple"
        },
        {
            "type": "PRECONJ",
            "labels": [ "", "PRECONJ" ],
            "color": "purple"
        },
        {
            "type": "PREDET",
            "labels": [ "", "PREDET" ],
            "color": "purple"
        },
        {
            "type": "PREF",
            "labels": [ "", "PREF" ],
            "color": "purple"
        },
        {
            "type": "PREP",
            "labels": [ "", "PREP" ],
            "color": "purple"
        },
        {
            "type": "PRONL",
            "labels": [ "", "PRONL" ],
            "color": "purple"
        },
        {
            "type": "PRT",
            "labels": [ "", "PRT" ],
            "color": "purple"
        },
        {
            "type": "PS",
            "labels": [ "", "PS" ],
            "color": "purple"
        },
        {
            "type": "QUANTMOD",
            "labels": [ "", "QUANTMOD" ],
            "color": "purple"
        },
        {
            "type": "RCMOD",
            "labels": [ "", "RCMOD" ],
            "color": "purple"
        },
        {
            "type": "RCMODREL",
            "labels": [ "", "RCMODREL" ],
            "color": "purple"
        },
        {
            "type": "RDROP",
            "labels": [ "", "RDROP" ],
            "color": "purple"
        },
        {
            "type": "REF",
            "labels": [ "", "REF" ],
            "color": "purple"
        },
        {
            "type": "REMNANT",
            "labels": [ "", "REMNANT" ],
            "color": "purple"
        },
        {
            "type": "REPARANDUM",
            "labels": [ "", "REPARANDUM" ],
            "color": "purple"
        },
        {
            "type": "ROOT",
            "labels": [ "", "ROOT" ],
            "color": "purple"
        },
        {
            "type": "SNUM",
            "labels": [ "", "SNUM" ],
            "color": "purple"
        },
        {
            "type": "SUFF",
            "labels": [ "", "SUFF" ],
            "color": "purple"
        },
        {
            "type": "TMOD",
            "labels": [ "", "TMOD" ],
            "color": "purple"
        },
        {
            "type": "TOPIC",
            "labels": [ "", "TOPIC" ],
            "color": "purple"
        },
        {
            "type": "VMOD",
            "labels": [ "", "VMOD" ],
            "color": "purple"
        },
        {
            "type": "VOCATIVE",
            "labels": [ "", "VOCATIVE" ],
            "color": "purple"
        },
        {
            "type": "XCOMP",
            "labels": [ "", "XCOMP" ],
            "color": "purple"
        },
        {
            "type": "SUFFIX",
            "labels": [ "", "SUFFIX" ],
            "color": "purple"
        },
        {
            "type": "TITLE",
            "labels": [ "", "TITLE" ],
            "color": "purple"
        },
        {
            "type": "ADVPHMOD",
            "labels": [ "", "ADVPHMOD" ],
            "color": "purple"
        },
        {
            "type": "AUXCAUS",
            "labels": [ "", "AUXCAUS" ],
            "color": "purple"
        },
        {
            "type": "AUXVV",
            "labels": [ "", "AUXVV" ],
            "color": "purple"
        },
        {
            "type": "DTMOD",
            "labels": [ "", "DTMOD" ],
            "color": "purple"
        },
        {
            "type": "FOREIGN",
            "labels": [ "", "FOREIGN" ],
            "color": "purple"
        },
        {
            "type": "KW",
            "labels": [ "", "KW" ],
            "color": "purple"
        },
        {
            "type": "LIST",
            "labels": [ "", "LIST" ],
            "color": "purple"
        },
        {
            "type": "NOMC",
            "labels": [ "", "NOMC" ],
            "color": "purple"
        },
        {
            "type": "NOMCSUBJ",
            "labels": [ "", "NOMCSUBJ" ],
            "color": "purple"
        },
        {
            "type": "NOMCSUBJPASS",
            "labels": [ "", "NOMCSUBJPASS" ],
            "color": "purple"
        },
        {
            "type": "NUMC",
            "labels": [ "", "NUMC" ],
            "color": "purple"
        },
        {
            "type": "COP",
            "labels": [ "", "COP" ],
            "color": "purple"
        },
        {
            "type": "DISLOCATED",
            "labels": [ "", "DISLOCATED" ],
            "color": "purple"
        }
    ]
};


var collData1 = {
"entity_types": [
    {
        "type": "CC",
        "labels": [ "", "CC" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "CD",
        "labels": [ "", "CD" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "DT",
        "labels": [ "", "DT" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "EX",
        "labels": [ "", "EX" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "FW",
        "labels": [ "", "FW" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "IN",
        "labels": [ "", "IN" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "JJ",
        "labels": [ "", "JJ" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "JJR",
        "labels": [ "", "JJR" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "JJS",
        "labels": [ "", "JJS" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "LS",
        "labels": [ "", "LS" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "MD",           
        "labels": [ "", "MD" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "NN",
        "labels": [ "", "NN" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "NNS",
        "labels": [ "", "NNS" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "NNP",
        "labels": [ "", "NNP" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "NNPS",
        "labels": [ "", "NNPS" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "PDT",
        "labels": [ "", "PDT" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "POS",
        "labels": [ "", "POS" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "PRP",
        "labels": [ "", "PRP" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "PRP$",
        "labels": [ "", "PRP$" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "RB",
        "labels": [ "", "RB" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "RBR",
        "labels": [ "", "RBR" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "RBS",
        "labels": [ "", "RBS" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "RP",
        "labels": [ "", "RP" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "SYM",
        "labels": [ "", "SYM" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "TO",
        "labels": [ "", "TO" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "UH",
        "labels": [ "", "UH" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "VB",
        "labels": [ "", "VB" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "VBD",
        "labels": [ "", "VBD" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "VBG",
        "labels": [ "", "VBG" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "VBN",
        "labels": [ "", "VBN" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "VBP",
        "labels": [ "", "VBP" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "VBZ",
        "labels": [ "", "VBZ" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "WDT",
        "labels": [ "", "WDT" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "WP",
        "labels": [ "", "WP" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "WP$",
        "labels": [ "", "WP$" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    },
    {
        "type": "WRB",
        "labels": [ "", "WRB" ],
        "bgColor": "#7fa2ff",
        "borderColor": "darken"
    }

],

"relation_types": [
    {
        "type": "acl",
        "labels": [ "", "acl" ],
        "color": "purple"
    },
    {
        "type": "advcl",
        "labels": [ "", "advcl" ],
        "color": "purple"
    },
    {
        "type": "advmod",
        "labels": [ "", "advmod" ],
        "color": "purple"
    },
    {
        "type": "amod",
        "labels": [ "", "amod" ],
        "color": "purple"
    },
    {
        "type": "appos",
        "labels": [ "", "appos" ],
        "color": "purple"
    },
    {
        "type": "aux",
        "labels": [ "", "aux" ],
        "color": "purple"
    },
    {
        "type": "case",
        "labels": [ "", "case" ],
        "color": "purple"
    },
    {
        "type": "cc",
        "labels": [ "", "cc" ],
        "color": "purple"
    },
    {
        "type": "ccomp",
        "labels": [ "", "ccomp" ],
        "color": "purple"
    },
    {
        "type": "clf",
        "labels": [ "", "clf" ],
        "color": "purple"
    },
    {
        "type": "compound",
        "labels": [ "", "compound" ],
        "color": "purple"
    },
    {
        "type": "conj",
        "labels": [ "", "conj" ],
        "color": "purple"
    },
    {
        "type": "cop",
        "labels": [ "", "cop" ],
        "color": "purple"
    },
    {
        "type": "csubj",
        "labels": [ "", "csubj" ],
        "color": "purple"
    },
    {
        "type": "dep",
        "labels": [ "", "dep" ],
        "color": "purple"
    },
    {
        "type": "det",           
        "labels": [ "", "det" ],
        "color": "purple"
    },
    {
        "type": "discourse",
        "labels": [ "", "discourse" ],
        "color": "purple"
    },
    {
        "type": "dobj",
        "labels": [ "", "dobj" ],
        "color": "purple"
    },
    {
        "type": "dislocated",
        "labels": [ "", "dislocated" ],
        "color": "purple"
    },
    {
        "type": "expl",            
        "labels": [ "", "expl" ],
        "color": "purple"
    },
    {
        "type": "fixed",            
        "labels": [ "", "fixed" ],
        "color": "purple"
    },
    {
        "type": "flat",            
        "labels": [ "", "flat" ],
        "color": "purple"
    },
    {
        "type": "goeswith",
        "labels": [ "", "goeswith" ],
        "color": "purple"
    },
    {
        "type": "iobj",
        "labels": [ "", "iobj" ],
        "color": "purple"
    },
    {
        "type": "list",            
        "labels": [ "", "list" ],
        "color": "purple"
    },
    {
        "type": "mark",
        "labels": [ "", "mark" ],
        "color": "purple"
    },
    {
        "type": "nmod",
        "labels": [ "", "nmod" ],
        "color": "purple"
    },
    {
        "type": "nsubj",
        "labels": [ "", "nsubj" ],
        "color": "purple"
    },
    {
        "type": "nummod",            
        "labels": [ "", "nummod" ],
        "color": "purple"
    },
    {
        "type": "obj",            
        "labels": [ "", "obj" ],
        "color": "purple"
    },
    {
        "type": "obl",            
        "labels": [ "", "obl" ],
        "color": "purple"
    },
    {
        "type": "orphan",            
        "labels": [ "", "orphan" ],
        "color": "purple"
    },
    {
        "type": "parataxis",
        "labels": [ "", "parataxis" ],
        "color": "purple"
    },
    {
        "type": "punct",
        "labels": [ "", "punct" ],
        "color": "purple"
    },
    {
        "type": "reparandum",
        "labels": [ "", "reparandum" ],
        "color": "purple"
    },
    {
        "type": "ROOT",
        "labels": [ "", "ROOT" ],
        "color": "purple"
    },
    {
        "type": "vocative",
        "labels": [ "", "vocative" ],
        "color": "purple"
    },
    {
        "type": "xcomp",
        "labels": [ "", "xcomp" ],
        "color": "purple"
    }
]
};


var docData ={};

$(document).ready(function(){   
    $(".getJson").click(function(){
        callNode();
    });
    $(".getBrat").click(function(){
        testAjax();
    });
});

function callNode(){
    texts=$(".getTextForAjax").val();

    var dataJson = {
        "text":texts
    };
    console.log(dataJson);
    $.ajax({
        type: 'POST',
        data: dataJson,
        url: 'http://localhost:3000/parseNLU',
        success: function(data){
            get_data = data;
            var entities1=[];
            var relations1=[];
            var l=0;

            for(k=0; k<get_data.sentences.length; k++){
                for(l=0; l<get_data.sentences[k].basicDependencies.length; l++){
                    if(get_data.sentences[k].basicDependencies[l].governor==0){
                        get_data.sentences[k].basicDependencies[l].governor =1;
                    }
                }
            };
            /*var relations1_id = [];
            var token_id = [];
            for(j=0; j<get_data.sentences.length; j++){
                for(i=0; i<get_data.sentences[j].basicDependencies.length; i++){
            		relations1_id = "R"+i;
            		token_id = "T" + i;
            	}
            }*/

            for(j=0; j<get_data.sentences.length; j++){
                for(i=0; i<get_data.sentences[j].basicDependencies.length; i++){
                    relations1_id = "R"+i;
                    entities1.push([i+1,get_data.sentences[j].tokens[i].pos,[[get_data.sentences[j].tokens[i].characterOffsetBegin, get_data.sentences[j].tokens[i].characterOffsetEnd]]]);
                    relations1.push([relations1_id,get_data.sentences[j].basicDependencies[i].dep,[[get_data.sentences[j].tokens[get_data.sentences[j].basicDependencies[i].governor-1].pos,get_data.sentences[j].basicDependencies[i].governor], [get_data.sentences[j].tokens[get_data.sentences[j].basicDependencies[i].dependent-1].pos,get_data.sentences[j].basicDependencies[i].dependent]]]);
                }
            }

            var docData1 = {
                // Our text of choice
                text : texts,
                // The entities entry holds all entity annotations
                entities : entities1,
                relations: relations1
            };
            //console.log(docData1);
            var bratLocation = 'brat/client/';

            head.js(
                // External libraries
                bratLocation + 'lib/jquery.min.js',
                bratLocation + 'lib/jquery.svg.min.js',
                bratLocation + 'lib/jquery.svgdom.min.js',

                // brat helper modules
                bratLocation + 'src/configuration.js',
                bratLocation + 'src/util.js',
                bratLocation + 'src/annotation_log.js',
                bratLocation + 'lib/webfont.js',

                // brat modules
                bratLocation + 'src/dispatcher.js',
                bratLocation + 'src/url_monitor.js',
                bratLocation + 'src/visualizer.js'
            );

            var webFontURLs = [
                'brat/static/fonts/Astloch-Bold.ttf',
                'brat/static/fonts/PT_Sans-Caption-Web-Regular.ttf',
                'brat/static/fonts/Liberation_Sans-Regular.ttf'
            ];
            head.ready(function() {
                    // Evaluate the code from the example (with ID
                    // 'embedding-entity-example') and show it to the user
                    //console.log(docData);
                    Util.embed('core_nlp-example', $.extend({}, collData1),
                            $.extend({}, docData1), webFontURLs);
            });
        }
    });
}


function testAjax() {
    var  i=0;
    texts=$(".getTextForAjax").val();
    var analyzeSyntax={
        "document": {
            "type": "PLAIN_TEXT",
            "content": texts
        },
        "encodingType": "UTF8"
    };

    var bratURL='https://language.googleapis.com/v1/documents:analyzeSyntax?key=AIzaSyCbgqfDbTjaAVz-TA9XKrd-tlcpFTm4SVo';
    $.ajax({
        url:bratURL,
        data:JSON.stringify(analyzeSyntax),
        contentType: "application/json",
        dataType: "json",
        type:'post',
        cache:false,  
        success:function(data) {
            myData=data;
            var entities=[];
            var relations=[];
            console.log(data);
            for(j=0;j<myData.sentences.length;j++){
                while (i < myData.tokens.length && i<myData.tokens[i].text.beginOffset<=(myData.tokens[i].text.beginOffset+myData.tokens[i].text.content.length-1)) { 
                    var start=myData.tokens[i].text.beginOffset;
                    var end=start+myData.tokens[i].text.content.length;
                    var relationID="R"+i;
                    entities.push([i,myData.tokens[i].partOfSpeech.tag,
                    [[start,end]]]);
                    relations.push([relationID,myData.tokens[i].dependencyEdge.label,[[myData.tokens[myData.tokens[i].dependencyEdge.headTokenIndex].partOfSpeech.tag,myData.tokens[i].dependencyEdge.headTokenIndex], [myData.tokens[i].partOfSpeech.tag,i]]]);
                    i=i+1;
                };
            }

			            
            var docData = {
                // Our text of choice
                text : texts,
                // The entities entry holds all entity annotations
                entities : entities,
                relations: relations
            };
            console.log(docData);
            var bratLocation = 'brat/client/';

            head.js(
                // External libraries
                bratLocation + 'lib/jquery.min.js',
                bratLocation + 'lib/jquery.svg.min.js',
                bratLocation + 'lib/jquery.svgdom.min.js',

                // brat helper modules
                bratLocation + 'src/configuration.js',
                bratLocation + 'src/util.js',
                bratLocation + 'src/annotation_log.js',
                bratLocation + 'lib/webfont.js',

                // brat modules
                bratLocation + 'src/dispatcher.js',
                bratLocation + 'src/url_monitor.js',
                bratLocation + 'src/visualizer.js'
            );

            var webFontURLs = [
                'brat/static/fonts/Astloch-Bold.ttf',
                'brat/static/fonts/PT_Sans-Caption-Web-Regular.ttf',
                'brat/static/fonts/Liberation_Sans-Regular.ttf'
            ];

            head.ready(function() {
                // Evaluate the code from the example (with ID
                //'embedding-entity-example') and show it to the user
                Util.embed('embedding-entity-example', $.extend({}, collData), $.extend({}, docData), webFontURLs);
            });

        
        },
        error:function(){
                 
        }
    });
    
}



